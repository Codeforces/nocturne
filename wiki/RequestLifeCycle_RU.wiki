#summary Описывает жизненный цикл одного HTTP-запроса.

Ноктюрн обращает внимание только на те запросы, которые соответствуют url-pattern для
фильтра org.nocturne.main.DispatchFilter.

В том случае, если URL запроса удовлетворяет параметру nocturne.skip-regex, то ноктюрн перестает обрабатывать этот запрос и отдает его filterChain.

В противном случае запускается механизм поиска подходящей страницы (Page) для обработки запроса. Для этого URL и request.getParameterMap() передаются в класс, заданный в nocturne.page-class-name-resolver, а тот возвращает специальный объект Resolution, у которого есть три поля: pageClassName, action, и overrideParameters. Первый обозначает имя класса страницы (контроллера), второй action внутри данной страницы, а третий - это HashMap, которым переписываются (или добавляются) параметры в запрос.

После того как Page обнаружен, то экземпляр страницы создается или берется из пула страниц и далее уже идет работа с ним. Заметим, что из пула страницы раздаются таким образом, что один экземпляр страницы не обрабатывается единовременно 2-мя и более потоками. Таким образом, заботится о потоковой безопасности страниц не надо. 

Далее:

Если страница была только что создана, то у нее вызывается метод init(). Таким образом, у каждой страницы этот метод вызывается ровно 1 раз (при первом обращении после создания).



