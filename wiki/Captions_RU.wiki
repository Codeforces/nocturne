#summary О способе интернационализации, используемом в nocturne

= Captions =

Nocturne позволяет очень просто писать многоязыковые приложения и легко править различные подписи, надписи и проч.

Механизм называется Captions и суть его состоит в том, что вывод любой текстовой информации оборачивается в caption. Например, в шаблоне вместо 
{{{
<td>Login:</td><td><input name="login" class="login"/></td>
}}}
должно быть написано
{{{
<td>{{Login}}:</td><td><input name="login" class="login"/></td>
}}}

В таком случае на этапе загрузки темплейта Nocturne обработает инструкцию {{{ {{Login}} }}} и заменит ее на значение caption-а с именем {{{Login}}} в нужной локали. 

Все что выводится и может быть зависимо от языка должно проходить через caption-ы. Например, иногда это надо делать и в коде приложения. Сообщения от валидаторов должны быть обернуты, а они зачастую берутся из ValidationException: 
{{{
        if (!value.matches("\\w+")) {
            throw new ValidationException($("Field should contain letters, digits and underscore characters"));
        }
}}}

Обратите внимание на волшебный метод {{{$()}}}, который есть у всех валидаторов, контроллеров и доступен из любого участка кода через {{{ApplicationContext.getInstance().$}}}. У него есть форма, которая позволяет передать параметры в виде, например
{{{
$("Field should contain at least {0} characters", minimalLength)
}}}